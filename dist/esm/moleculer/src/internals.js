import t from"./errors.js";import e from"./utils.js";const{MoleculerClientError:o}=t;export default function(){return{name:"$node",actions:{list:{cache:!1,tracing:!1,params:{withServices:{type:"boolean",optional:!0,convert:!0,default:!1},onlyAvailable:{type:"boolean",optional:!0,convert:!0,default:!1}},handler(t){return this.broker.registry.getNodeList(t.params)}},services:{cache:!1,tracing:!1,params:{onlyLocal:{type:"boolean",optional:!0,convert:!0,default:!1},skipInternal:{type:"boolean",optional:!0,convert:!0,default:!1},withActions:{type:"boolean",optional:!0,convert:!0,default:!1},withEvents:{type:"boolean",optional:!0,convert:!0,default:!1},onlyAvailable:{type:"boolean",optional:!0,convert:!0,default:!1},grouping:{type:"boolean",optional:!0,convert:!0,default:!0}},handler(t){return this.broker.registry.getServiceList(t.params)}},actions:{cache:!1,tracing:!1,params:{onlyLocal:{type:"boolean",optional:!0,convert:!0,default:!1},skipInternal:{type:"boolean",optional:!0,convert:!0,default:!1},withEndpoints:{type:"boolean",optional:!0,convert:!0,default:!1},onlyAvailable:{type:"boolean",optional:!0,convert:!0,default:!1}},handler(t){return this.broker.registry.getActionList(t.params)}},events:{cache:!1,tracing:!1,params:{onlyLocal:{type:"boolean",optional:!0,convert:!0,default:!1},skipInternal:{type:"boolean",optional:!0,convert:!0,default:!1},withEndpoints:{type:"boolean",optional:!0,convert:!0,default:!1},onlyAvailable:{type:"boolean",optional:!0,convert:!0,default:!1}},handler(t){return this.broker.registry.getEventList(t.params)}},health:{cache:!1,tracing:!1,handler(){return this.broker.getHealthStatus()}},options:{cache:!1,tracing:!1,params:{},handler(){return e.safetyObject(this.broker.options,this.broker.options)}},metrics:{cache:!1,tracing:!1,params:{types:{type:"multi",optional:!0,rules:[{type:"string"},{type:"array",items:"string"}]},includes:{type:"multi",optional:!0,rules:[{type:"string"},{type:"array",items:"string"}]},excludes:{type:"multi",optional:!0,rules:[{type:"string"},{type:"array",items:"string"}]}},handler(t){return this.broker.isMetricsEnabled()?this.broker.metrics.list(t.params):this.Promise.reject(new o("Metrics feature is disabled",400,"METRICS_DISABLED"))}}}}}
//# sourceMappingURL=internals.js.map
