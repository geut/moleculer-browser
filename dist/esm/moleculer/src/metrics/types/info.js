import e from"lodash";import t from"../constants.js";import s from"./base.js";const{pick:a}=e;var l=class extends s{constructor(e,s){super(e,s),this.type=t.TYPE_INFO}set(e,t,s){const l=this.hashingLabels(t);let r=this.values.get(l);return r?e!=r.value&&(r.value=e,r.timestamp=null==s?Date.now():s,this.changed(e,t,s)):(r={value:e,labels:a(t,this.labelNames),timestamp:null==s?Date.now():s},this.values.set(l,r),this.changed(e,t,s)),r}reset(e,t){return this.set(null,e,t)}resetAll(e){this.values.forEach((t=>{t.value=null,t.timestamp=null==e?Date.now():e})),this.changed()}generateSnapshot(){return Array.from(this.values.keys()).map((e=>{const t=this.values.get(e);return{key:e,value:t.value,labels:t.labels,timestamp:t.timestamp}}))}};export default l;
//# sourceMappingURL=info.js.map
