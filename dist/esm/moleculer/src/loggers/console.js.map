{"version":3,"file":"console.js","sources":["../../../../../src/moleculer/src/loggers/console.js"],"sourcesContent":["/*\n * moleculer\n * Copyright (c) 2020 MoleculerJS (https://github.com/moleculerjs/moleculer)\n * MIT Licensed\n */\n\n/* eslint-disable no-console */\n\n\"use strict\";\n\nconst FormattedLogger \t= require(\"./formatted\");\nconst kleur \t\t\t= require(\"kleur\");\n\n/**\n * Console logger for Moleculer\n *\n * @class ConsoleLogger\n * @extends {FormattedLogger}\n */\nclass ConsoleLogger extends FormattedLogger {\n\n\t/**\n\t * Creates an instance of ConsoleLogger.\n\t * @param {Object} opts\n\t * @memberof ConsoleLogger\n\t */\n\tconstructor(opts) {\n\t\tsuper(opts);\n\n\t\tthis.maxPrefixLength = 0;\n\t}\n\n\tinit(loggerFactory) {\n\t\tsuper.init(loggerFactory);\n\n\t\tif (!this.opts.colors)\n\t\t\tkleur.enabled = false;\n\t}\n\n\t/**\n\t *\n\t * @param {object} bindings\n\t */\n\tgetLogHandler(bindings) {\n\t\tconst level = bindings ? this.getLogLevel(bindings.mod) : null;\n\t\tif (!level)\n\t\t\treturn null;\n\n\t\tconst levelIdx = FormattedLogger.LEVELS.indexOf(level);\n\t\tconst formatter = this.getFormatter(bindings);\n\n\t\treturn (type, args) => {\n\t\t\tconst typeIdx = FormattedLogger.LEVELS.indexOf(type);\n\t\t\tif (typeIdx > levelIdx) return;\n\n\t\t\tconst pargs = formatter(type, args);\n\t\t\tswitch(type) {\n\t\t\t\tcase \"fatal\":\n\t\t\t\tcase \"error\": return console.error(...pargs);\n\t\t\t\tcase \"warn\": return console.warn(...pargs);\n\t\t\t\tdefault: return console.log(...pargs);\n\t\t\t}\n\t\t};\n\t}\n\n}\n\nmodule.exports = ConsoleLogger;\n"],"names":["FormattedLogger","[object Object]","opts","super","this","maxPrefixLength","loggerFactory","init","colors","kleur","enabled","bindings","level","getLogLevel","mod","levelIdx","LEVELS","indexOf","formatter","getFormatter","type","args","pargs","console","error","warn","log"],"mappings":"yDAmBA,cAA4BA,EAO3BC,YAAYC,GACXC,MAAMD,GAENE,KAAKC,gBAAkB,EAGxBJ,KAAKK,GACJH,MAAMI,KAAKD,GAENF,KAAKF,KAAKM,SACdC,EAAMC,SAAU,GAOlBT,cAAcU,GACb,MAAMC,EAAQD,EAAWP,KAAKS,YAAYF,EAASG,KAAO,KAC1D,IAAKF,EACJ,OAAO,KAER,MAAMG,EAAWf,EAAgBgB,OAAOC,QAAQL,GAC1CM,EAAYd,KAAKe,aAAaR,GAEpC,MAAO,CAACS,EAAMC,KAEb,GADgBrB,EAAgBgB,OAAOC,QAAQG,GACjCL,EAAU,OAExB,MAAMO,EAAQJ,EAAUE,EAAMC,GAC9B,OAAOD,GACN,IAAK,QACL,IAAK,QAAS,OAAOG,QAAQC,SAASF,GACtC,IAAK,OAAQ,OAAOC,QAAQE,QAAQH,GACpC,QAAS,OAAOC,QAAQG,OAAOJ"}