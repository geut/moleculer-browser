{"version":3,"file":"console.js","sources":["../../../../../src/moleculer/src/loggers/console.js"],"sourcesContent":["/*\n * moleculer\n * Copyright (c) 2020 MoleculerJS (https://github.com/moleculerjs/moleculer)\n * MIT Licensed\n */\n\n/* eslint-disable no-console */\n\n\"use strict\";\n\nconst FormattedLogger \t= require(\"./formatted\");\nconst kleur \t\t\t= require(\"kleur\");\n\n/**\n * Console logger for Moleculer\n *\n * @class ConsoleLogger\n * @extends {FormattedLogger}\n */\nclass ConsoleLogger extends FormattedLogger {\n\n\t/**\n\t * Creates an instance of ConsoleLogger.\n\t * @param {Object} opts\n\t * @memberof ConsoleLogger\n\t */\n\tconstructor(opts) {\n\t\tsuper(opts);\n\n\t\tthis.maxPrefixLength = 0;\n\t}\n\n\tinit(loggerFactory) {\n\t\tsuper.init(loggerFactory);\n\n\t\tif (!this.opts.colors)\n\t\t\tkleur.enabled = false;\n\t}\n\n\t/**\n\t *\n\t * @param {object} bindings\n\t */\n\tgetLogHandler(bindings) {\n\t\tconst level = bindings ? this.getLogLevel(bindings.mod) : null;\n\t\tif (!level)\n\t\t\treturn null;\n\n\t\tconst levelIdx = FormattedLogger.LEVELS.indexOf(level);\n\t\tconst formatter = this.getFormatter(bindings);\n\n\t\treturn (type, args) => {\n\t\t\tconst typeIdx = FormattedLogger.LEVELS.indexOf(type);\n\t\t\tif (typeIdx > levelIdx) return;\n\n\t\t\tconst pargs = formatter(type, args);\n\t\t\tswitch(type) {\n\t\t\t\tcase \"fatal\":\n\t\t\t\tcase \"error\": return console.error(...pargs);\n\t\t\t\tcase \"warn\": return console.warn(...pargs);\n\t\t\t\tdefault: return console.log(...pargs);\n\t\t\t}\n\t\t};\n\t}\n\n}\n\nmodule.exports = ConsoleLogger;\n"],"names":["FormattedLogger"],"mappings":";;;AAaA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,aAAa,SAASA,SAAe,CAAC;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,WAAW,CAAC,IAAI,EAAE;AACnB,EAAE,KAAK,CAAC,IAAI,CAAC,CAAC;AACd;AACA,EAAE,IAAI,CAAC,eAAe,GAAG,CAAC,CAAC;AAC3B,EAAE;AACF;AACA,CAAC,IAAI,CAAC,aAAa,EAAE;AACrB,EAAE,KAAK,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;AAC5B;AACA,EAAE,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM;AACvB,GAAG,KAAK,CAAC,OAAO,GAAG,KAAK,CAAC;AACzB,EAAE;AACF;AACA;AACA;AACA;AACA;AACA,CAAC,aAAa,CAAC,QAAQ,EAAE;AACzB,EAAE,MAAM,KAAK,GAAG,QAAQ,GAAG,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC;AACjE,EAAE,IAAI,CAAC,KAAK;AACZ,GAAG,OAAO,IAAI,CAAC;AACf;AACA,EAAE,MAAM,QAAQ,GAAGA,SAAe,CAAC,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;AACzD,EAAE,MAAM,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC;AAChD;AACA,EAAE,OAAO,CAAC,IAAI,EAAE,IAAI,KAAK;AACzB,GAAG,MAAM,OAAO,GAAGA,SAAe,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;AACxD,GAAG,IAAI,OAAO,GAAG,QAAQ,EAAE,OAAO;AAClC;AACA,GAAG,MAAM,KAAK,GAAG,SAAS,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;AACvC,GAAG,OAAO,IAAI;AACd,IAAI,KAAK,OAAO,CAAC;AACjB,IAAI,KAAK,OAAO,EAAE,OAAO,OAAO,CAAC,KAAK,CAAC,GAAG,KAAK,CAAC,CAAC;AACjD,IAAI,KAAK,MAAM,EAAE,OAAO,OAAO,CAAC,IAAI,CAAC,GAAG,KAAK,CAAC,CAAC;AAC/C,IAAI,SAAS,OAAO,OAAO,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC,CAAC;AAC1C,IAAI;AACJ,GAAG,CAAC;AACJ,EAAE;AACF;AACA,CAAC;AACD;aACc,GAAG;;;;"}