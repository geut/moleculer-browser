{"version":3,"file":"index.js","sources":["../../../../../src/moleculer/src/loggers/index.js"],"sourcesContent":["/*\n * moleculer\n * Copyright (c) 2020 MoleculerJS (https://github.com/moleculerjs/moleculer)\n * MIT Licensed\n */\n\n\"use strict\";\n\nconst { isObject, isString } = require(\"../utils\");\nconst { BrokerOptionsError } = require(\"../errors\");\nconst Base = require(\"./base\");\n\nconst Loggers = {\n\tBase,\n\tFormatted: require(\"./formatted\"),\n\n\tBunyan: require(\"./bunyan\"),\n\tConsole: require(\"./console\"),\n\tDatadog: require(\"./datadog\"),\n\tDebug: require(\"./debug\"),\n\tFile: require(\"./file\"),\n\tLog4js: require(\"./log4js\"),\n\tPino: require(\"./pino\"),\n\tWinston: require(\"./winston\"),\n\n\tLEVELS: Base.LEVELS\n};\n\nfunction getByName(name) {\n\t/* istanbul ignore next */\n\tif (!name)\n\t\treturn null;\n\n\tlet n = Object.keys(Loggers).find(n => n.toLowerCase() == name.toLowerCase());\n\tif (n)\n\t\treturn Loggers[n];\n}\n\n/**\n * Resolve reporter by name\n *\n * @param {object|string} opt\n * @returns {Reporter}\n * @memberof ServiceBroker\n */\nfunction resolve(opt) {\n\tif (opt instanceof Loggers.Base) {\n\t\treturn opt;\n\t} else if (isString(opt)) {\n\t\tlet LoggerClass = getByName(opt);\n\t\tif (LoggerClass)\n\t\t\treturn new LoggerClass();\n\n\t} else if (isObject(opt)) {\n\t\tlet LoggerClass = getByName(opt.type);\n\t\tif (LoggerClass)\n\t\t\treturn new LoggerClass(opt.options);\n\t\telse\n\t\t\tthrow new BrokerOptionsError(`Invalid logger configuration. Type: '${opt.type}'`, { type: opt.type });\n\t}\n\n\tthrow new BrokerOptionsError(`Invalid logger configuration: '${opt}'`, { type: opt });\n}\n\nfunction register(name, value) {\n\tLoggers[name] = value;\n}\n\nmodule.exports = Object.assign(Loggers, { resolve, register });\n\n"],"names":["require$$0","require$$1","Base","require$$2","require$$3","require$$4","require$$5","require$$6","require$$7","require$$8","require$$9","require$$10"],"mappings":";;;;;;;AAQA,MAAM,EAAE,QAAQ,EAAE,QAAQ,EAAE,GAAGA,OAAmB,CAAC;AACnD,MAAM,EAAE,kBAAkB,EAAE,GAAGC,MAAoB,CAAC;AACrB;AAC/B;AACA,MAAM,OAAO,GAAG;AAChB,OAACC,IAAI;AACL,CAAC,SAAS,EAAEC,SAAsB;AAClC;AACA,CAAC,MAAM,EAAEC,WAAmB;AAC5B,CAAC,OAAO,EAAEC,SAAoB;AAC9B,CAAC,OAAO,EAAEC,WAAoB;AAC9B,CAAC,KAAK,EAAEC,WAAkB;AAC1B,CAAC,IAAI,EAAEC,WAAiB;AACxB,CAAC,MAAM,EAAEC,WAAmB;AAC5B,CAAC,IAAI,EAAEC,WAAiB;AACxB,CAAC,OAAO,EAAEC,WAAoB;AAC9B;AACA,CAAC,MAAM,EAAET,IAAI,CAAC,MAAM;AACpB,CAAC,CAAC;AACF;AACA,SAAS,SAAS,CAAC,IAAI,EAAE;AACzB;AACA,CAAC,IAAI,CAAC,IAAI;AACV,EAAE,OAAO,IAAI,CAAC;AACd;AACA,CAAC,IAAI,CAAC,GAAG,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,WAAW,EAAE,IAAI,IAAI,CAAC,WAAW,EAAE,CAAC,CAAC;AAC/E,CAAC,IAAI,CAAC;AACN,EAAE,OAAO,OAAO,CAAC,CAAC,CAAC,CAAC;AACpB,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,OAAO,CAAC,GAAG,EAAE;AACtB,CAAC,IAAI,GAAG,YAAY,OAAO,CAAC,IAAI,EAAE;AAClC,EAAE,OAAO,GAAG,CAAC;AACb,EAAE,MAAM,IAAI,QAAQ,CAAC,GAAG,CAAC,EAAE;AAC3B,EAAE,IAAI,WAAW,GAAG,SAAS,CAAC,GAAG,CAAC,CAAC;AACnC,EAAE,IAAI,WAAW;AACjB,GAAG,OAAO,IAAI,WAAW,EAAE,CAAC;AAC5B;AACA,EAAE,MAAM,IAAI,QAAQ,CAAC,GAAG,CAAC,EAAE;AAC3B,EAAE,IAAI,WAAW,GAAG,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;AACxC,EAAE,IAAI,WAAW;AACjB,GAAG,OAAO,IAAI,WAAW,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;AACvC;AACA,GAAG,MAAM,IAAI,kBAAkB,CAAC,CAAC,qCAAqC,EAAE,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,IAAI,EAAE,GAAG,CAAC,IAAI,EAAE,CAAC,CAAC;AACzG,EAAE;AACF;AACA,CAAC,MAAM,IAAI,kBAAkB,CAAC,CAAC,+BAA+B,EAAE,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,IAAI,EAAE,GAAG,EAAE,CAAC,CAAC;AACvF,CAAC;AACD;AACA,SAAS,QAAQ,CAAC,IAAI,EAAE,KAAK,EAAE;AAC/B,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,KAAK,CAAC;AACvB,CAAC;AACD;WACc,GAAG,MAAM,CAAC,MAAM,CAAC,OAAO,EAAE,EAAE,OAAO,EAAE,QAAQ,EAAE;;;;"}