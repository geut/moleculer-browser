{"version":3,"file":"debounce.js","sources":["../../../../../src/moleculer/src/middlewares/debounce.js"],"sourcesContent":["/*\n * moleculer\n * Copyright (c) 2019 MoleculerJS (https://github.com/moleculerjs/moleculer)\n * MIT Licensed\n */\n\n\"use strict\";\n\nmodule.exports = function debounceMiddleware(broker) {\n\n\tfunction wrapEventDebounceMiddleware(handler, event) {\n\t\tif (event.debounce > 0) {\n\t\t\tlet timer;\n\n\t\t\treturn function debounceMiddleware(ctx) {\n\t\t\t\tif (timer)\n\t\t\t\t\tclearTimeout(timer);\n\n\t\t\t\ttimer = setTimeout(() => {\n\t\t\t\t\ttimer = null;\n\t\t\t\t\treturn handler(ctx);\n\t\t\t\t}, event.debounce);\n\n\t\t\t\treturn broker.Promise.resolve();\n\t\t\t}.bind(this);\n\t\t}\n\t\treturn handler;\n\t}\n\n\treturn {\n\t\tname: \"Debounce\",\n\n\t\tlocalEvent: wrapEventDebounceMiddleware\n\t};\n};\n"],"names":["broker","name","localEvent","handler","event","debounce","timer","ctx","clearTimeout","setTimeout","Promise","resolve","bind","this"],"mappings":"8DAQiB,SAA4BA,GAqB5C,MAAO,CACNC,KAAM,WAENC,WAtBD,SAAqCC,EAASC,GAC7C,GAAIA,EAAMC,SAAW,EAAG,CACvB,IAAIC,EAEJ,OAAO,SAA4BC,GASlC,OARID,GACHE,aAAaF,GAEdA,EAAQG,GAAW,KAClBH,EAAQ,KACDH,EAAQI,KACbH,EAAMC,UAEFL,EAAOU,QAAQC,WACrBC,KAAKC,MAER,OAAOV"}