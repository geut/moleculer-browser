{"version":3,"file":"debounce.js","sources":["../../../../../src/moleculer/src/middlewares/debounce.js"],"sourcesContent":["/*\n * moleculer\n * Copyright (c) 2019 MoleculerJS (https://github.com/moleculerjs/moleculer)\n * MIT Licensed\n */\n\n\"use strict\";\n\nmodule.exports = function debounceMiddleware(broker) {\n\n\tfunction wrapEventDebounceMiddleware(handler, event) {\n\t\tif (event.debounce > 0) {\n\t\t\tlet timer;\n\n\t\t\treturn function debounceMiddleware(ctx) {\n\t\t\t\tif (timer)\n\t\t\t\t\tclearTimeout(timer);\n\n\t\t\t\ttimer = setTimeout(() => {\n\t\t\t\t\ttimer = null;\n\t\t\t\t\treturn handler(ctx);\n\t\t\t\t}, event.debounce);\n\n\t\t\t\treturn broker.Promise.resolve();\n\t\t\t}.bind(this);\n\t\t}\n\t\treturn handler;\n\t}\n\n\treturn {\n\t\tname: \"Debounce\",\n\n\t\tlocalEvent: wrapEventDebounceMiddleware\n\t};\n};\n"],"names":[],"mappings":";;YAQc,GAAG,SAAS,kBAAkB,CAAC,MAAM,EAAE;AACrD;AACA,CAAC,SAAS,2BAA2B,CAAC,OAAO,EAAE,KAAK,EAAE;AACtD,EAAE,IAAI,KAAK,CAAC,QAAQ,GAAG,CAAC,EAAE;AAC1B,GAAG,IAAI,KAAK,CAAC;AACb;AACA,GAAG,OAAO,SAAS,kBAAkB,CAAC,GAAG,EAAE;AAC3C,IAAI,IAAI,KAAK;AACb,KAAK,YAAY,CAAC,KAAK,CAAC,CAAC;AACzB;AACA,IAAI,KAAK,GAAG,UAAU,CAAC,MAAM;AAC7B,KAAK,KAAK,GAAG,IAAI,CAAC;AAClB,KAAK,OAAO,OAAO,CAAC,GAAG,CAAC,CAAC;AACzB,KAAK,EAAE,KAAK,CAAC,QAAQ,CAAC,CAAC;AACvB;AACA,IAAI,OAAO,MAAM,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;AACpC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AAChB,GAAG;AACH,EAAE,OAAO,OAAO,CAAC;AACjB,EAAE;AACF;AACA,CAAC,OAAO;AACR,EAAE,IAAI,EAAE,UAAU;AAClB;AACA,EAAE,UAAU,EAAE,2BAA2B;AACzC,EAAE,CAAC;AACH;;;;"}