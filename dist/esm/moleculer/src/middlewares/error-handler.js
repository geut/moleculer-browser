import e from"../errors.js";const{MoleculerError:r}=e;function t(e){return function(t){return e(t).catch((e=>(e instanceof Error||(e=new r(e,500)),t.nodeID!==this.nodeID&&this.transit&&this.transit.removePendingRequest(t.id),this.logger.debug(`The '${t.action.name}' request is rejected.`,{requestID:t.requestID},e),Object.defineProperty(e,"ctx",{value:t,writable:!0,enumerable:!1}),t.broker.errorHandler(e,{ctx:t,service:t.service,action:t.action}))))}.bind(this)}function n(e){return function(t){return e(t).catch((e=>(e instanceof Error||(e=new r(e,500)),this.logger.debug(`Error occured in the '${t.event.name}' event handler in the '${t.service.fullName}' service.`,{requestID:t.requestID},e),Object.defineProperty(e,"ctx",{value:t,writable:!0,enumerable:!1}),t.broker.errorHandler(e,{ctx:t,service:t.service,event:t.event})))).catch((e=>{t.broker.logger.error(e)}))}.bind(this)}export default function(){return{name:"ErrorHandler",localAction:t,remoteAction:t,localEvent:n}}
//# sourceMappingURL=error-handler.js.map
