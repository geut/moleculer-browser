{"version":3,"file":"service.js","sources":["../../../../src/moleculer/src/service.js"],"sourcesContent":["/*\n * moleculer\n * Copyright (c) 2020 MoleculerJS (https://github.com/moleculerjs/moleculer)\n * MIT Licensed\n */\n\n\"use strict\";\n\nconst _ \t\t\t\t\t\t= require(\"lodash\");\nconst functionArguments \t\t= require(\"fn-args\");\nconst { ServiceSchemaError, MoleculerError } \t= require(\"./errors\");\nconst { isObject, isFunction, flatten }\t= require(\"./utils\");\n\n/**\n * Wrap a handler Function to an object with a `handler` property.\n *\n * @param {Function|Object} o\n * @returns {Object}\n */\nfunction wrapToHander(o) {\n\treturn isFunction(o) ? { handler: o } : o;\n}\n\n/**\n * Wrap any value to an array.\n * @param {any} o\n * @returns {Array}\n */\nfunction wrapToArray(o) {\n\treturn Array.isArray(o) ? o : [o];\n}\n\nfunction isNewSignature(args) {\n\treturn args.length > 0 && [\"ctx\", \"context\"].indexOf(args[0].toLowerCase()) !== -1;\n}\n\n\n/**\n * Service class\n *\n * @class Service\n */\nclass Service {\n\n\t/**\n\t * Creates an instance of Service by schema.\n\t *\n\t * @param {ServiceBroker} \tbroker\tbroker of service\n\t * @param {Object} \t\t\tschema\tschema of service\n\t *\n\t * @memberof Service\n\t */\n\tconstructor(broker, schema) {\n\t\tif (!isObject(broker))\n\t\t\tthrow new ServiceSchemaError(\"Must set a ServiceBroker instance!\");\n\n\t\tthis.broker = broker;\n\n\t\tif (broker)\n\t\t\tthis.Promise = broker.Promise;\n\n\t\tif (schema)\n\t\t\tthis.parseServiceSchema(schema);\n\t}\n\n\t/**\n\t * Parse Service schema & register as local service\n\t *\n\t * @param {Object} schema of Service\n\t */\n\tparseServiceSchema(schema) {\n\t\tif (!isObject(schema))\n\t\t\tthrow new ServiceSchemaError(\"The service schema can't be null. Maybe is it not a service schema?\");\n\n\t\tthis.originalSchema = _.cloneDeep(schema);\n\n\t\tif (schema.mixins) {\n\t\t\tschema = Service.applyMixins(schema);\n\t\t}\n\n\t\tif (isFunction(schema.merged)) {\n\t\t\tschema.merged.call(this, schema);\n\t\t} else if (Array.isArray(schema.merged)) {\n\t\t\tschema.merged.forEach(fn => fn.call(this, schema));\n\t\t}\n\n\t\tthis.broker.callMiddlewareHookSync(\"serviceCreating\", [this, schema]);\n\n\t\tif (!schema.name) {\n\t\t\t/* eslint-disable-next-line */\n\t\t\tconsole.error(\"Service name can't be empty! Maybe it is not a valid Service schema. Maybe is it not a service schema?\", { schema });\n\t\t\tthrow new ServiceSchemaError(\"Service name can't be empty! Maybe it is not a valid Service schema. Maybe is it not a service schema?\", { schema });\n\t\t}\n\n\t\tthis.name = schema.name;\n\t\tthis.version = schema.version;\n\t\tthis.settings = schema.settings || {};\n\t\tthis.metadata = schema.metadata || {};\n\t\tthis.schema = schema;\n\n\t\tthis.fullName = Service.getVersionedFullName(this.name, this.settings.$noVersionPrefix !== true ? this.version : undefined);\n\n\t\tthis.logger = this.broker.getLogger(this.fullName, {\n\t\t\tsvc: this.name,\n\t\t\tver: this.version\n\t\t});\n\n\t\tthis.actions = {}; // external access to actions\n\t\tthis.events = {}; // external access to event handlers.\n\n\t\t// Service item for Registry\n\t\tconst serviceSpecification = {\n\t\t\tname: this.name,\n\t\t\tversion: this.version,\n\t\t\tfullName: this.fullName,\n\t\t\tsettings: this._getPublicSettings(this.settings),\n\t\t\tmetadata: this.metadata,\n\t\t\tactions: {},\n\t\t\tevents: {}\n\t\t};\n\n\t\t// Register methods\n\t\tif (isObject(schema.methods)) {\n\n\t\t\t_.forIn(schema.methods, (method, name) => {\n\t\t\t\t/* istanbul ignore next */\n\t\t\t\tif ([\"name\", \"version\", \"settings\", \"metadata\", \"dependencies\", \"schema\", \"broker\", \"actions\", \"logger\", \"created\", \"started\", \"stopped\", \"_start\", \"_stop\", \"_init\"].indexOf(name) != -1) {\n\t\t\t\t\tthrow new ServiceSchemaError(`Invalid method name '${name}' in '${this.name}' service!`);\n\t\t\t\t}\n\n\t\t\t\tthis._createMethod(method, name);\n\t\t\t});\n\t\t}\n\n\t\t// Register actions\n\t\tif (isObject(schema.actions)) {\n\t\t\t_.forIn(schema.actions, (action, name) => {\n\t\t\t\tif (action === false)\n\t\t\t\t\treturn;\n\n\t\t\t\tlet innerAction = this._createAction(action, name);\n\n\t\t\t\tserviceSpecification.actions[innerAction.name] = innerAction;\n\n\t\t\t\tconst wrappedHandler = this.broker.middlewares.wrapHandler(\"localAction\", innerAction.handler, innerAction);\n\n\t\t\t\t// Expose to be callable as `this.actions.find({ ...params })`\n\t\t\t\tconst ep = this.broker.registry.createPrivateActionEndpoint(innerAction);\n\t\t\t\tthis.actions[name] = (params, opts) => {\n\t\t\t\t\tlet ctx;\n\t\t\t\t\tif (opts && opts.ctx) {\n\t\t\t\t\t\t// Reused context (in case of retry)\n\t\t\t\t\t\tctx = opts.ctx;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tctx = this.broker.ContextFactory.create(this.broker, ep, params, opts || {});\n\t\t\t\t\t}\n\t\t\t\t\treturn wrappedHandler(ctx);\n\t\t\t\t};\n\n\t\t\t});\n\t\t}\n\n\t\t// Event subscriptions\n\t\tif (isObject(schema.events)) {\n\t\t\t_.forIn(schema.events, (event, name) => {\n\t\t\t\tconst innerEvent = this._createEvent(event, name);\n\t\t\t\tserviceSpecification.events[innerEvent.name] = innerEvent;\n\n\t\t\t\t// Expose to be callable as `this.events[''](params, opts);\n\t\t\t\tthis.events[innerEvent.name] = (params, opts) => {\n\t\t\t\t\tlet ctx;\n\t\t\t\t\tif (opts && opts.ctx) {\n\t\t\t\t\t\t// Reused context (in case of retry)\n\t\t\t\t\t\tctx = opts.ctx;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst ep = {\n\t\t\t\t\t\t\tid: this.broker.nodeID,\n\t\t\t\t\t\t\tevent: innerEvent\n\t\t\t\t\t\t};\n\t\t\t\t\t\tctx = this.broker.ContextFactory.create(this.broker, ep, params, opts || {});\n\t\t\t\t\t}\n\t\t\t\t\tctx.eventName = name;\n\t\t\t\t\tctx.eventType = \"emit\";\n\t\t\t\t\tctx.eventGroups = [innerEvent.group || this.name];\n\n\t\t\t\t\treturn innerEvent.handler(ctx);\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\n\t\tthis._serviceSpecification = serviceSpecification;\n\n\t\t// Initialize\n\t\tthis._init();\n\t}\n\n\t/**\n\t * Return a service settings without protected properties.\n\t *\n\t * @param {Object?} settings\n\t */\n\t_getPublicSettings(settings) {\n\t\tif (settings && Array.isArray(settings.$secureSettings)) {\n\t\t\treturn _.omit(settings, [].concat(settings.$secureSettings, [\"$secureSettings\"]));\n\t\t}\n\n\t\treturn settings;\n\t}\n\n\t/**\n\t * Initialize service. It called `created` handler in schema\n\t *\n\t * @private\n\t * @memberof Service\n\t */\n\t_init() {\n\t\tthis.logger.debug(`Service '${this.fullName}' is creating...`);\n\t\tif (isFunction(this.schema.created)) {\n\t\t\tthis.schema.created.call(this);\n\t\t} else if (Array.isArray(this.schema.created)) {\n\t\t\tthis.schema.created.forEach(fn => fn.call(this));\n\t\t}\n\n\t\tthis.broker.addLocalService(this);\n\n\t\tthis.broker.callMiddlewareHookSync(\"serviceCreated\", [this]);\n\n\t\tthis.logger.debug(`Service '${this.fullName}' created.`);\n\t}\n\n\t/**\n\t * Start service\n\t *\n\t * @returns {Promise}\n\t * @private\n\t * @memberof Service\n\t */\n\t_start() {\n\t\tthis.logger.debug(`Service '${this.fullName}' is starting...`);\n\t\treturn this.Promise.resolve()\n\t\t\t.then(() => {\n\t\t\t\treturn this.broker.callMiddlewareHook(\"serviceStarting\", [this]);\n\t\t\t})\n\t\t\t.then(() => {\n\t\t\t\t// Wait for dependent services\n\t\t\t\tif (this.schema.dependencies)\n\t\t\t\t\treturn this.waitForServices(this.schema.dependencies, this.settings.$dependencyTimeout || 0, this.settings.$dependencyInterval || this.broker.options.dependencyInterval);\n\t\t\t})\n\t\t\t.then(() => {\n\t\t\t\tif (isFunction(this.schema.started))\n\t\t\t\t\treturn this.Promise.method(this.schema.started).call(this);\n\n\t\t\t\tif (Array.isArray(this.schema.started)) {\n\t\t\t\t\treturn this.schema.started\n\t\t\t\t\t\t.map(fn => this.Promise.method(fn.bind(this)))\n\t\t\t\t\t\t.reduce((p, fn) => p.then(() => fn()), this.Promise.resolve());\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then(() => {\n\t\t\t\t// Register service\n\t\t\t\tthis.broker.registerLocalService(this._serviceSpecification);\n\t\t\t\treturn null;\n\t\t\t})\n\t\t\t.then(() => {\n\t\t\t\treturn this.broker.callMiddlewareHook(\"serviceStarted\", [this]);\n\t\t\t})\n\t\t\t.then(() => this.logger.info(`Service '${this.fullName}' started.`));\n\t}\n\n\t/**\n\t * Stop service\n\t *\n\t * @returns {Promise}\n\t * @private\n\t * @memberof Service\n\t */\n\t_stop() {\n\t\tthis.logger.debug(`Service '${this.fullName}' is stopping...`);\n\t\treturn this.Promise.resolve()\n\t\t\t.then(() => {\n\t\t\t\treturn this.broker.callMiddlewareHook(\"serviceStopping\", [this], { reverse: true });\n\t\t\t})\n\t\t\t.then(() => {\n\t\t\t\tif (isFunction(this.schema.stopped))\n\t\t\t\t\treturn this.Promise.method(this.schema.stopped).call(this);\n\n\t\t\t\tif (Array.isArray(this.schema.stopped)) {\n\t\t\t\t\tconst arr = Array.from(this.schema.stopped).reverse();\n\t\t\t\t\treturn arr\n\t\t\t\t\t\t.map(fn => this.Promise.method(fn.bind(this)))\n\t\t\t\t\t\t.reduce((p, fn) => p.then(() => fn()), this.Promise.resolve());\n\t\t\t\t}\n\n\t\t\t\treturn this.Promise.resolve();\n\t\t\t})\n\t\t\t.then(() => {\n\t\t\t\treturn this.broker.callMiddlewareHook(\"serviceStopped\", [this], { reverse: true });\n\t\t\t})\n\t\t\t.then(() => this.logger.info(`Service '${this.fullName}' stopped.`));\n\t}\n\n\t/**\n\t * Create an external action handler for broker (internal command!)\n\t *\n\t * @param {Object|Function} actionDef\n\t * @param {String} name\n\t * @returns {Object}\n\t *\n\t * @private\n\t * @memberof Service\n\t */\n\t_createAction(actionDef, name) {\n\t\tlet action;\n\t\tif (isFunction(actionDef)) {\n\t\t\t// Wrap to an object\n\t\t\taction = {\n\t\t\t\thandler: actionDef\n\t\t\t};\n\t\t} else if (isObject(actionDef)) {\n\t\t\taction = _.cloneDeep(actionDef);\n\t\t} else {\n\t\t\tthrow new ServiceSchemaError(`Invalid action definition in '${name}' action in '${this.fullName}' service!`);\n\t\t}\n\n\t\tlet handler = action.handler;\n\t\tif (!isFunction(handler)) {\n\t\t\tthrow new ServiceSchemaError(`Missing action handler on '${name}' action in '${this.fullName}' service!`);\n\t\t}\n\n\t\taction.rawName = action.name || name;\n\t\tif (this.settings.$noServiceNamePrefix !== true)\n\t\t\taction.name = this.fullName + \".\" + action.rawName;\n\t\telse\n\t\t\taction.name = action.rawName;\n\n\t\tif (action.cache === undefined && this.settings.$cache !== undefined) {\n\t\t\taction.cache = this.settings.$cache;\n\t\t}\n\n\t\taction.service = this;\n\t\taction.handler = this.Promise.method(handler.bind(this));\n\n\t\treturn action;\n\t}\n\n\t/**\n\t * Create an internal service method.\n\t *\n\t * @param {Object|Function} methodDef\n\t * @param {String} name\n\t * @returns {Object}\n\t */\n\t_createMethod(methodDef, name) {\n\t\tlet method;\n\t\tif (isFunction(methodDef)) {\n\t\t\t// Wrap to an object\n\t\t\tmethod = {\n\t\t\t\thandler: methodDef\n\t\t\t};\n\t\t} else if (isObject(methodDef)) {\n\t\t\tmethod = methodDef;\n\t\t} else {\n\t\t\tthrow new ServiceSchemaError(`Invalid method definition in '${name}' method in '${this.fullName}' service!`);\n\t\t}\n\n\t\tif (!isFunction(method.handler)) {\n\t\t\tthrow new ServiceSchemaError(`Missing method handler on '${name}' method in '${this.fullName}' service!`);\n\t\t}\n\n\t\tmethod.name = name;\n\t\tmethod.service = this;\n\t\tmethod.handler = method.handler.bind(this);\n\n\t\tthis[name] = this.broker.middlewares.wrapHandler(\"localMethod\", method.handler, method);\n\n\t\treturn method;\n\t}\n\n\t/**\n\t * Create an event subscription for broker\n\t *\n\t * @param {Object|Function} eventDef\n\t * @param {String} name\n\t * @returns {Object}\n\t *\n\t * @private\n\t * @memberof Service\n\t */\n\t_createEvent(eventDef, name) {\n\t\tlet event;\n\t\tif (isFunction(eventDef) || Array.isArray(eventDef)) {\n\t\t\tevent = {\n\t\t\t\thandler: eventDef\n\t\t\t};\n\t\t} else if (isObject(eventDef)) {\n\t\t\tevent = _.cloneDeep(eventDef);\n\t\t} else {\n\t\t\tthrow new ServiceSchemaError(`Invalid event definition in '${name}' event in '${this.fullName}' service!`);\n\t\t}\n\n\t\tif (!isFunction(event.handler) && !Array.isArray(event.handler)) {\n\t\t\tthrow new ServiceSchemaError(`Missing event handler on '${name}' event in '${this.fullName}' service!`);\n\t\t}\n\n\t\t// Detect new or legacy parameter list of event handler\n\t\t// Legacy: handler(payload, sender, eventName)\n\t\t// New: handler(ctx)\n\t\tlet handler;\n\t\tif (isFunction(event.handler)) {\n\t\t\tconst args = functionArguments(event.handler);\n\t\t\thandler = this.Promise.method(event.handler);\n\t\t\thandler.__newSignature = event.context === true || isNewSignature(args);\n\t\t} else if (Array.isArray(event.handler)) {\n\t\t\thandler = event.handler.map(h => {\n\t\t\t\tconst args = functionArguments(h);\n\t\t\t\th = this.Promise.method(h);\n\t\t\t\th.__newSignature = event.context === true || isNewSignature(args);\n\t\t\t\treturn h;\n\t\t\t});\n\t\t}\n\n\t\tif (!event.name)\n\t\t\tevent.name = name;\n\n\t\tevent.service = this;\n\t\tconst self = this;\n\t\tif (isFunction(handler)) {\n\t\t\t// Call single handler\n\t\t\tevent.handler = function(ctx) {\n\t\t\t\treturn handler.apply(self, handler.__newSignature ? [ctx] : [ctx.params, ctx.nodeID, ctx.eventName, ctx]);\n\t\t\t};\n\t\t} else if (Array.isArray(handler)) {\n\t\t\t// Call multiple handler\n\t\t\tevent.handler = function(ctx) {\n\t\t\t\treturn self.Promise.all(handler.map(fn => fn.apply(self, fn.__newSignature ? [ctx] : [ctx.params, ctx.nodeID, ctx.eventName, ctx])));\n\t\t\t};\n\t\t}\n\n\t\treturn event;\n\t}\n\n\t/**\n\t * Call a local event handler. Useful for unit tests.\n\t *\n\t * @param {String} eventName\n\t * @param {any?} params\n\t * @param {Object?} opts\n\t */\n\temitLocalEventHandler(eventName, params, opts) {\n\t\tif (!this.events[eventName])\n\t\t\treturn Promise.reject(new MoleculerError(`No '${eventName}' registered local event handler`, 500, \"NOT_FOUND_EVENT\", { eventName }));\n\n\t\treturn this.events[eventName](params, opts);\n\t}\n\n\t/**\n\t * Getter of current Context.\n\t * @returns {Context?}\n\t *\n\t * @memberof Service\n\t *\n\tget currentContext() {\n\t\treturn this.broker.getCurrentContext();\n\t}*/\n\n\t/**\n\t * Setter of current Context\n\t *\n\t * @memberof Service\n\t *\n\tset currentContext(ctx) {\n\t\tthis.broker.setCurrentContext(ctx);\n\t}*/\n\n\t/**\n\t * Wait for other services\n\t *\n\t * @param {String|Array<String>} serviceNames\n\t * @param {Number} timeout Timeout in milliseconds\n\t * @param {Number} interval Check interval in milliseconds\n\t * @returns {Promise}\n\t * @memberof Service\n\t */\n\twaitForServices(serviceNames, timeout, interval) {\n\t\treturn this.broker.waitForServices(serviceNames, timeout, interval, this.logger);\n\t}\n\n\t/**\n\t * Apply `mixins` list in schema. Merge the schema with mixins schemas. Returns with the mixed schema\n\t *\n\t * @static\n\t * @param {Schema} schema\n\t * @returns {Schema}\n\t *\n\t * @memberof Service\n\t */\n\tstatic applyMixins(schema) {\n\t\tif (schema.mixins) {\n\t\t\tconst mixins = Array.isArray(schema.mixins) ? schema.mixins : [schema.mixins];\n\t\t\tif (mixins.length > 0) {\n\t\t\t\tconst mixedSchema = Array.from(mixins).reverse().reduce((s, mixin) => {\n\t\t\t\t\tif (mixin.mixins)\n\t\t\t\t\t\tmixin = Service.applyMixins(mixin);\n\n\t\t\t\t\treturn s ? Service.mergeSchemas(s, mixin) : mixin;\n\t\t\t\t}, null);\n\n\t\t\t\treturn Service.mergeSchemas(mixedSchema, schema);\n\t\t\t}\n\t\t}\n\n\t\t/* istanbul ignore next */\n\t\treturn schema;\n\t}\n\n\t/**\n\t * Merge two Service schema\n\t *\n\t * @static\n\t * @param {Object} mixinSchema\t\tMixin schema\n\t * @param {Object} svcSchema \t\tService schema\n\t * @returns {Object} Mixed schema\n\t *\n\t * @memberof Service\n\t */\n\tstatic mergeSchemas(mixinSchema, svcSchema) {\n\t\tconst res = _.cloneDeep(mixinSchema);\n\t\tconst mods = _.cloneDeep(svcSchema);\n\n\t\tObject.keys(mods).forEach(key => {\n\t\t\tif ([\"name\", \"version\"].indexOf(key) !== -1 && mods[key] !== undefined) {\n\t\t\t\t// Simple overwrite\n\t\t\t\tres[key] = mods[key];\n\t\t\t} else if (key == \"settings\") {\n\t\t\t\t// Merge with defaultsDeep\n\t\t\t\tres[key] = Service.mergeSchemaSettings(mods[key], res[key]);\n\n\t\t\t} else if (key == \"metadata\") {\n\t\t\t\t// Merge with defaultsDeep\n\t\t\t\tres[key] = Service.mergeSchemaMetadata(mods[key], res[key]);\n\n\t\t\t} else if (key == \"hooks\") {\n\t\t\t\t// Merge & concat\n\t\t\t\tres[key] = Service.mergeSchemaHooks(mods[key], res[key] || {});\n\n\t\t\t} else if (key == \"actions\") {\n\t\t\t\t// Merge with defaultsDeep\n\t\t\t\tres[key] = Service.mergeSchemaActions(mods[key], res[key] || {});\n\n\t\t\t} else if (key == \"methods\") {\n\t\t\t\t// Overwrite\n\t\t\t\tres[key] = Service.mergeSchemaMethods(mods[key], res[key]);\n\n\t\t\t} else if (key == \"events\") {\n\t\t\t\t// Merge & concat by groups\n\t\t\t\tres[key] = Service.mergeSchemaEvents(mods[key], res[key] || {});\n\n\t\t\t} else if ([\"merged\", \"created\", \"started\", \"stopped\"].indexOf(key) !== -1) {\n\t\t\t\t// Concat lifecycle event handlers\n\t\t\t\tres[key] = Service.mergeSchemaLifecycleHandlers(mods[key], res[key]);\n\n\t\t\t} else if (key == \"mixins\") {\n\t\t\t\t// Concat mixins\n\t\t\t\tres[key] = Service.mergeSchemaUniqArray(mods[key], res[key]);\n\n\t\t\t} else if (key == \"dependencies\") {\n\t\t\t\t// Concat mixins\n\t\t\t\tres[key] = Service.mergeSchemaUniqArray(mods[key], res[key]);\n\n\t\t\t} else {\n\t\t\t\tconst customFnName = \"mergeSchema\" + key.replace(/./, key[0].toUpperCase()); // capitalize first letter\n\t\t\t\tif (isFunction(Service[customFnName])) {\n\t\t\t\t\tres[key] = Service[customFnName](mods[key], res[key]);\n\t\t\t\t} else {\n\t\t\t\t\tres[key] = Service.mergeSchemaUnknown(mods[key], res[key]);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn res;\n\t}\n\n\t/**\n\t * Merge `settings` property in schema\n\t *\n\t * @static\n\t * @param {Object} src Source schema property\n\t * @param {Object} target Target schema property\n\t *\n\t * @returns {Object} Merged schema\n\t */\n\tstatic mergeSchemaSettings(src, target) {\n\t\tif ((target && target.$secureSettings) || (src && src.$secureSettings)) {\n\t\t\tconst srcSS = src && src.$secureSettings ? src.$secureSettings : [];\n\t\t\tconst targetSS = target && target.$secureSettings ? target.$secureSettings : [];\n\t\t\tif (!target) target = {};\n\n\t\t\ttarget.$secureSettings = _.uniq([].concat(srcSS, targetSS));\n\t\t}\n\n\t\treturn _.defaultsDeep(src, target);\n\t}\n\n\t/**\n\t * Merge `metadata` property in schema\n\t *\n\t * @static\n\t * @param {Object} src Source schema property\n\t * @param {Object} target Target schema property\n\t *\n\t * @returns {Object} Merged schema\n\t */\n\tstatic mergeSchemaMetadata(src, target) {\n\t\treturn _.defaultsDeep(src, target);\n\t}\n\n\t/**\n\t * Merge `mixins` property in schema\n\t *\n\t * @static\n\t * @param {Object} src Source schema property\n\t * @param {Object} target Target schema property\n\t *\n\t * @returns {Object} Merged schema\n\t */\n\tstatic mergeSchemaUniqArray(src, target) {\n\t\treturn _.uniqWith(_.compact(flatten([src, target])), _.isEqual);\n\t}\n\n\t/**\n\t * Merge `dependencies` property in schema\n\t *\n\t * @static\n\t * @param {Object} src Source schema property\n\t * @param {Object} target Target schema property\n\t *\n\t * @returns {Object} Merged schema\n\t */\n\tstatic mergeSchemaDependencies(src, target) {\n\t\treturn Service.mergeSchemaUniqArray(src, target);\n\t}\n\n\t/**\n\t * Merge `hooks` property in schema\n\t *\n\t * @static\n\t * @param {Object} src Source schema property\n\t * @param {Object} target Target schema property\n\t *\n\t * @returns {Object} Merged schema\n\t */\n\tstatic mergeSchemaHooks(src, target) {\n\t\tObject.keys(src).forEach(k => {\n\t\t\tif (target[k] == null)\n\t\t\t\ttarget[k] = {};\n\n\t\t\tObject.keys(src[k]).forEach(k2 => {\n\t\t\t\tconst modHook = wrapToArray(src[k][k2]);\n\t\t\t\tconst resHook = wrapToArray(target[k][k2]);\n\n\t\t\t\ttarget[k][k2] = _.compact(flatten(k == \"before\" ? [resHook, modHook] : [modHook, resHook]));\n\t\t\t});\n\t\t});\n\n\t\treturn target;\n\t}\n\n\t/**\n\t * Merge `actions` property in schema\n\t *\n\t * @static\n\t * @param {Object} src Source schema property (real schema)\n\t * @param {Object} target Target schema property (mixin schema)\n\t *\n\t * @returns {Object} Merged schema\n\t */\n\tstatic mergeSchemaActions(src, target) {\n\t\tObject.keys(src).forEach(k => {\n\t\t\tif (src[k] === false && target[k]) {\n\t\t\t\tdelete target[k];\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst srcAction = wrapToHander(src[k]);\n\t\t\tconst targetAction = wrapToHander(target[k]);\n\n\t\t\tif (srcAction && srcAction.hooks && targetAction && targetAction.hooks) {\n\t\t\t\tObject.keys(srcAction.hooks).forEach(k => {\n\t\t\t\t\tconst modHook = wrapToArray(srcAction.hooks[k]);\n\t\t\t\t\tconst resHook = wrapToArray(targetAction.hooks[k]);\n\n\t\t\t\t\tsrcAction.hooks[k] = _.compact(flatten(k == \"before\" ? [resHook, modHook] : [modHook, resHook]));\n\t\t\t\t});\n\t\t\t}\n\n\t\t\ttarget[k] = _.defaultsDeep(srcAction, targetAction);\n\t\t});\n\n\t\treturn target;\n\t}\n\n\t/**\n\t * Merge `methods` property in schema\n\t *\n\t * @static\n\t * @param {Object} src Source schema property\n\t * @param {Object} target Target schema property\n\t *\n\t * @returns {Object} Merged schema\n\t */\n\tstatic mergeSchemaMethods(src, target) {\n\t\treturn Object.assign(target || {}, src || {});\n\t}\n\n\t/**\n\t * Merge `events` property in schema\n\t *\n\t * @static\n\t * @param {Object} src Source schema property\n\t * @param {Object} target Target schema property\n\t *\n\t * @returns {Object} Merged schema\n\t */\n\tstatic mergeSchemaEvents(src, target) {\n\t\tObject.keys(src).forEach(k => {\n\t\t\tconst modEvent = wrapToHander(src[k]);\n\t\t\tconst resEvent = wrapToHander(target[k]);\n\n\t\t\tlet handler = _.compact(flatten([resEvent ? resEvent.handler : null, modEvent ? modEvent.handler : null]));\n\t\t\tif (handler.length == 1) handler = handler[0];\n\n\t\t\ttarget[k] = _.defaultsDeep(modEvent, resEvent);\n\t\t\ttarget[k].handler = handler;\n\t\t});\n\n\t\treturn target;\n\t}\n\n\t/**\n\t * Merge `started`, `stopped`, `created` event handler properties in schema\n\t *\n\t * @static\n\t * @param {Object} src Source schema property\n\t * @param {Object} target Target schema property\n\t *\n\t * @returns {Object} Merged schema\n\t */\n\tstatic mergeSchemaLifecycleHandlers(src, target) {\n\t\treturn _.compact(flatten([target, src]));\n\t}\n\n\t/**\n\t * Merge unknown properties in schema\n\t *\n\t * @static\n\t * @param {Object} src Source schema property\n\t * @param {Object} target Target schema property\n\t *\n\t * @returns {Object} Merged schema\n\t */\n\tstatic mergeSchemaUnknown(src, target) {\n\t\tif (src !== undefined)\n\t\t\treturn src;\n\n\t\treturn target;\n\t}\n\n\t/**\n\t * Return a versioned full service name.\n\t * @param {String} name\n\t * @param {String|Number?} version\n\t */\n\tstatic getVersionedFullName(name, version) {\n\t\tif (version != null)\n\t\t\treturn (typeof(version) == \"number\" ? \"v\" + version : version) + \".\" + name;\n\n\t\treturn name;\n\t}\n\n}\n\nmodule.exports = Service;\n"],"names":["require$$0","require$$1"],"mappings":"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"}