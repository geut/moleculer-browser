import e from"../../errors.js";import r from"../../utils.js";import t from"../../../../no-impl.js";import i from"./base.js";import o from"./local.js";const{BrokerOptionsError:n}=e,{isObject:s,isString:f}=r,a={Base:i,Local:o,Etcd3:t,Redis:t};function c(e){if(!e)return null;let r=Object.keys(a).find((r=>r.toLowerCase()==e.toLowerCase()));return r?a[r]:void 0}var l=Object.assign(a,{resolve:function(e){if(e instanceof a.Base)return e;if(f(e)){let r=c(e);if(r)return new r;if(e.startsWith("redis://"))return new a.Redis(e);if(e.startsWith("etcd3://"))return new a.Etcd3(e);throw new n(`Invalid Discoverer type '${e}'.`,{type:e})}if(s(e)){let r=c(e.type||"Local");if(r)return new r(e.options);throw new n(`Invalid Discoverer type '${e.type}'.`,{type:e.type})}return new a.Local},register:function(e,r){a[e]=r}});export default l;
//# sourceMappingURL=index.js.map
