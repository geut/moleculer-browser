{"version":3,"file":"local.js","sources":["../../../../../../src/moleculer/src/registry/discoverers/local.js"],"sourcesContent":["/*\n * moleculer\n * Copyright (c) 2020 MoleculerJS (https://github.com/moleculerjs/moleculer)\n * MIT Licensed\n */\n\n\"use strict\";\n\nconst BaseDiscoverer = require(\"./base\");\n\n/**\n * Local (built-in) Discoverer class\n *\n * @class Discoverer\n */\nclass LocalDiscoverer extends BaseDiscoverer {\n\n\t/**\n\t * Creates an instance of Discoverer.\n\t *\n\t * @memberof LocalDiscoverer\n\t */\n\tconstructor(opts) {\n\t\tsuper(opts);\n\t}\n\n\t/**\n\t * Initialize Discoverer\n\t *\n\t * @param {any} registry\n\t *\n\t * @memberof LocalDiscoverer\n\t */\n\tinit(registry) {\n\t\tsuper.init(registry);\n\t}\n\n\t/**\n\t * Discover a new or old node.\n\t *\n\t * @param {String} nodeID\n\t */\n\tdiscoverNode(nodeID) {\n\t\tif (!this.transit) return this.Promise.resolve();\n\t\treturn this.transit.discoverNode(nodeID);\n\t}\n\n\t/**\n\t * Discover all nodes (after connected)\n\t */\n\tdiscoverAllNodes() {\n\t\tif (!this.transit) return this.Promise.resolve();\n\t\treturn this.transit.discoverNodes();\n\t}\n\n\t/**\n\t * Local service registry has been changed. We should notify remote nodes.\n\t *\n\t * @param {String} nodeID\n\t */\n\tsendLocalNodeInfo(nodeID) {\n\t\tif (!this.transit) return this.Promise.resolve();\n\n\t\tconst info = this.broker.getLocalNodeInfo();\n\t\treturn this.transit.sendNodeInfo(info, nodeID);\n\t}\n\n}\n\nmodule.exports = LocalDiscoverer;\n"],"names":["BaseDiscoverer"],"mappings":";;AAUA;AACA;AACA;AACA;AACA;AACA,MAAM,eAAe,SAASA,IAAc,CAAC;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,WAAW,CAAC,IAAI,EAAE;AACnB,EAAE,KAAK,CAAC,IAAI,CAAC,CAAC;AACd,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,IAAI,CAAC,QAAQ,EAAE;AAChB,EAAE,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;AACvB,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,YAAY,CAAC,MAAM,EAAE;AACtB,EAAE,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,OAAO,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;AACnD,EAAE,OAAO,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;AAC3C,EAAE;AACF;AACA;AACA;AACA;AACA,CAAC,gBAAgB,GAAG;AACpB,EAAE,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,OAAO,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;AACnD,EAAE,OAAO,IAAI,CAAC,OAAO,CAAC,aAAa,EAAE,CAAC;AACtC,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,iBAAiB,CAAC,MAAM,EAAE;AAC3B,EAAE,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,OAAO,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;AACnD;AACA,EAAE,MAAM,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,gBAAgB,EAAE,CAAC;AAC9C,EAAE,OAAO,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;AACjD,EAAE;AACF;AACA,CAAC;AACD;SACc,GAAG;;;;"}