{"version":3,"file":"local.js","sources":["../../../../../../src/moleculer/src/registry/discoverers/local.js"],"sourcesContent":["/*\n * moleculer\n * Copyright (c) 2020 MoleculerJS (https://github.com/moleculerjs/moleculer)\n * MIT Licensed\n */\n\n\"use strict\";\n\nconst BaseDiscoverer = require(\"./base\");\n\n/**\n * Local (built-in) Discoverer class\n *\n * @class Discoverer\n */\nclass LocalDiscoverer extends BaseDiscoverer {\n\n\t/**\n\t * Creates an instance of Discoverer.\n\t *\n\t * @memberof LocalDiscoverer\n\t */\n\tconstructor(opts) {\n\t\tsuper(opts);\n\t}\n\n\t/**\n\t * Initialize Discoverer\n\t *\n\t * @param {any} registry\n\t *\n\t * @memberof LocalDiscoverer\n\t */\n\tinit(registry) {\n\t\tsuper.init(registry);\n\t}\n\n\t/**\n\t * Discover a new or old node.\n\t *\n\t * @param {String} nodeID\n\t */\n\tdiscoverNode(nodeID) {\n\t\tif (!this.transit) return this.Promise.resolve();\n\t\treturn this.transit.discoverNode(nodeID);\n\t}\n\n\t/**\n\t * Discover all nodes (after connected)\n\t */\n\tdiscoverAllNodes() {\n\t\tif (!this.transit) return this.Promise.resolve();\n\t\treturn this.transit.discoverNodes();\n\t}\n\n\t/**\n\t * Local service registry has been changed. We should notify remote nodes.\n\t *\n\t * @param {String} nodeID\n\t */\n\tsendLocalNodeInfo(nodeID) {\n\t\tif (!this.transit) return this.Promise.resolve();\n\n\t\tconst info = this.broker.getLocalNodeInfo();\n\t\treturn this.transit.sendNodeInfo(info, nodeID);\n\t}\n\n}\n\nmodule.exports = LocalDiscoverer;\n"],"names":["BaseDiscoverer","[object Object]","opts","super","registry","init","nodeID","this","transit","discoverNode","Promise","resolve","discoverNodes","info","broker","getLocalNodeInfo","sendNodeInfo"],"mappings":"+BAeA,cAA8BA,EAO7BC,YAAYC,GACXC,MAAMD,GAUPD,KAAKG,GACJD,MAAME,KAAKD,GAQZH,aAAaK,GACZ,OAAKC,KAAKC,QACHD,KAAKC,QAAQC,aAAaH,GADPC,KAAKG,QAAQC,UAOxCV,mBACC,OAAKM,KAAKC,QACHD,KAAKC,QAAQI,gBADML,KAAKG,QAAQC,UASxCV,kBAAkBK,GACjB,IAAKC,KAAKC,QAAS,OAAOD,KAAKG,QAAQC,UAEvC,MAAME,EAAON,KAAKO,OAAOC,mBACzB,OAAOR,KAAKC,QAAQQ,aAAaH,EAAMP"}