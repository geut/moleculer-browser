{"version":3,"file":"process.js","sources":["../../src/process.js"],"sourcesContent":["import EventEmitter from 'eventemitter2'\nimport hrtime from 'browser-process-hrtime'\nimport global from './global'\n\nclass Process extends EventEmitter {\n  constructor () {\n    super()\n\n    this.title = 'browser'\n    this.browser = true\n    this.env = {}\n    this.argv = []\n    this.version = ''\n    this.versions = {\n      http_parser: '0.0',\n      node: '12.18.4',\n      v8: '0.0',\n      uv: '0.0',\n      zlib: '0.0',\n      ares: '0.0',\n      icu: '0.0',\n      modules: '0',\n      openssl: '0.0'\n    }\n    this.hrtime = hrtime\n    this.pid = 0\n    this.exitCode = 0\n    this.connected = true\n    this._startTime = Date.now()\n    this._errorCallback = null\n  }\n\n  exit (code) {\n    this.exitCode = code\n    this.emit('exit', [code])\n    throw new Error('process.exit() called.')\n  }\n\n  setUncaughtExceptionCaptureCallback (cb) {\n    if (this._errorCallback) {\n      window.removeEventListener('error', this._errorCallback)\n    }\n    this._errorCallback = cb\n    if (cb) {\n      window.addEventListener('error', cb)\n    }\n  }\n\n  hasUncaughtExceptionCaptureCallback () {\n    return this._errorCallback !== null\n  }\n\n  cwd () {\n    return '/'\n  }\n\n  uptime () {\n    return Math.floor((Date.now() - this._startTime) / 1000)\n  }\n\n  memoryUsage () {\n    if (!performance && !performance.memory) {\n      return {\n        rss: 0,\n        heapTotal: Number.MAX_SAFE_INTEGER,\n        heapUsed: 0,\n        external: 0\n      }\n    }\n\n    const { memory } = performance\n\n    return {\n      rss: 0,\n      heapTotal: memory.totalJSHeapSize,\n      heapUsed: memory.usedJSHeapSize,\n      external: 0\n    }\n  }\n\n  nextTick (handler, ...args) {\n    queueMicrotask(() => handler(...args))\n  }\n\n  _getActiveHandles () {\n    return []\n  }\n\n  _getActiveRequests () {\n    return []\n  }\n}\n\nconst proc = new Process()\n\n//\n// We monkey patch the current process to use our updated version.\n//\n\nconst currentProcess = (global && global.process) || process\n\nif (currentProcess) {\n  for (const prop in proc) {\n    if (typeof proc[prop] === 'function') {\n      currentProcess[prop] = proc[prop].bind(proc)\n      continue\n    }\n\n    currentProcess[prop] = proc[prop]\n  }\n}\n\nexport default proc\n"],"names":["EventEmitter"],"mappings":"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"}